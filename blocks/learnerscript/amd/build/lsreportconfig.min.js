define(["core/ajax","jquery","jqueryui"],function(t,i){var p={slideIndex:1,currentSlide:function(e){p.lsreportslideshow(p.slideIndex=e)},progressbar:i("#progressbar"),lsreportslideshow:function(e){var r,s=document.getElementsByClassName("mySlides");document.getElementsByClassName("demo");for(e>s.length&&(p.slideIndex=1),e<1&&(p.slideIndex=s.length),r=0;r<s.length;r++)s[r].style.display="none";s[p.slideIndex-1].style.display="block",setTimeout(function(){p.slideIndex>=s.length?p.currentSlide(1):p.lsreportslideshow(p.slideIndex++)},3e3)},lsconfigimportprogress:function(r){p.progressbar.progressbar("value");var e=r.total,s=r.current,o=r.errorreportspositiondata,n=r.lastreportposition;t.call([{methodname:"block_learnerscript_importreports",args:{total:e,current:s,errorreportspositiondata:o,lastreportposition:n}}],!1)[0].done(function(e){resp=i.parseJSON(e),p.progressbar.progressbar("value",resp.percent),resp.percent<100&&(resp.current&&0<resp.current?r.current=resp.current:r.current=r.current+1,setTimeout(function(){p.lsconfigimportprogress(r)},500))})},lsconfigresetprogress:function(r){t.call([{methodname:"block_learnerscript_resetlsconfig",args:{step:r}}],!1)[0].done(function(e){resp=i.parseJSON(e),p.progressbar.progressbar("value",resp.percent),100==resp.percent&&(window.location.href=M.cfg.wwwroot+"/blocks/learnerscript/lsconfig.php?import=1"),resp.percent<100&&(resp.next&&0<resp.next&&(r=resp.next),setTimeout(function(){p.lsconfigresetprogress(r)},500))})},lsreportconfigimport:function(){t.call([{methodname:"block_learnerscript_lsreportconfigimport",args:{}}])[0].done(function(e){return"Message from onbeforeunload handler"})}};return{init:function(e,r){p.progressbar.progressbar({value:!1,change:function(){},complete:function(){i("#reportdashboardnav").show(500)}}),0<i(".mySlides").length&&p.lsreportslideshow(1),"import"==r?p.lsconfigimportprogress(e):"reset"==r&&p.lsconfigresetprogress(1),window.onbeforeunload=p.lsreportconfigimport}}});